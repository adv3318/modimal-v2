# Vite Template

За основу взята сборка `npx create-vite-template-js --vanilla`, которая была модифицирована с помощью AI ассистента Antigravity.

## Запуск проекта

- Установка зависимостей: `npm install`
- Запуск режима разработки: `npm run dev`
- Сборка проекта: `npm run build`
- Предпросмотр сборки: `npm run preview`
- Проверка кода (линдинг): `npm run lint`
- Форматирование кода: `npm run prettier`

## Структура папок и файлов

```
├── .github/workflows                    # Папка с инструкциями для github actions по деплою проекта
│ └── static.yml
├── .husky/                              # Папка с инструкциями для husky перед созданием коммита
│ ├── commit-msg                         # Проверка сообщения коммита
│ └── pre-commit                         # Выполнение проверки кода
├── public/                              # Папка для хранения файлов, которые попадут в build версию без изменений
│ └── (favicon, видеофайлы и т.п.)
├── src/                                 # Папка с исходниками разработки
│ ├── fonts/                             # Папка для хранения шрифтов
│ │ └── (*.woff2)
│ ├── icons/                             # Папка для хранения иконок в svg формате для svg спрайта
│ │ └── (*.svg)
│ ├── images/                            # Папка для хранения картинок различных форматов, которые будут оптимизированы
│ │ └── (*.{png,webp,jpeg,jpg,gif,svg})
│ ├── partials/                          # Папка для хранения частей html файлов, которые можно будет использовать в файле страницы
│ │ └── (*.html)
│ ├── scripts/                           # Папка для хранения скриптов
│ │ └── (*.js)
│ ├── styles/                            # Папка для хранения стилей
│ │ ├── blocks/                          # Папка со стилями блоков/элементов
│ │ │ └── (*.scss)
│ │ ├── helpers/                         # Папка с вспомогательными инструментами
│ │ │ ├── constants.scss                 # Различные константы
│ │ │ ├── functions.scss                 # Реализованные функции
│ │ │ ├── index.scss                     # Подключение вспомогательных инструментов в один файл
│ │ │ ├── media.scss                     # Миксины с подготовленными медиа-запросами
│ │ │ └── mixins.scss                    # Часто используемая логика в миксинах
│ │ ├── fonts.scss                       # Локальное подключение шрифтов
│ │ ├── globals.scss                     # Глобальные стили
│ │ ├── index.js                         # Подключение всех стилей

│ │ ├── utils.scss                       # Утилитарные стили
│ │ ├── variables.scss                   # CSS переменные
│ │ └── vendors.scss                     # Подключение библиотек
│ ├── index.html                         # Основная страница сайта
│ └── main.js                            # Подключение стилей и скриптов
├── .gitignore                           # Список игнорируемых файлов и папок для git
├── commitlint.config.js                 # Конфигурация для commitlint
├── eslint.config.js                     # Конфигурация для eslint
├── jsconfig.json                        # Конфигурация для js
├── package.json                         # Основной файл с конфигурацией пакетного менеджера
├── package-lock.json                    # Список определенных версий зависимостей для пакетного менеджера
├── postcss.config.js                    # Конфигурация postcss
├── prettier.config.js                   # Конфигурация для prettier
├── README.md                            # Документация шаблона
├── .stylelintignore                     # Игнорируемые файлы для stylelint
├── stylelint.config.js                  # Конфигурация для stylelint
└── vite.config.js                       # Конфигурация для vite
```

## Навигация

- [Работа со стилями](#работа-со-стилями)
- [Работа с HTML](#работа-с-html)
- [Работа с JavaScript](#работа-с-javascript)
- [Чистый код](#чистый-код)
- [Углубленная работа с Git и GitHub](#углубленная-работа-с-git-и-github)
- [Полезные ресурсы](#полезные-ресурсы)

## Работа со стилями

В шаблоне используется препроцессор **scss** и все его возможности для создания гибких интерфейсов без боли и костылей.

Для нормализации стилей используется библиотека от [Александра Ламкова](https://www.youtube.com/@AleksanderLamkov) - [@a1rth/css-normalize](https://www.npmjs.com/package/@a1rth/css-normalize).

Если нужно стилизовать блок/элемент:

- Создаем для него файл в папке **blocks** и пишем нужные нам стили;
- Подключаем наш файл со стилями в **index.js**, который находится в папке **styles**;

Все сторонние стили (стили библиотек и т.п.) подключаются в **vendors.scss**.

> Название для scss-файлов не нужно начинать со знака подчеркивания "\_".

Вся папка **helpers** содержит в себе вспомогательные инструменты для работы со стилями.
**Vite** автоматически импортирует эти инструменты в каждый файл со стилями, поэтому можно спокойно использовать любые функции/миксины/константы, реализованные в этих инструментах.

В миксинах и медиа-запросах нет ничего удивительного, но вот к функциям стоит присмотреться, ведь они сильно упрощают создание адаптивных интерфейсов.
Эти функции `fluid()` и `fluid-to-laptop()` конвертируют переданные два значения min и max в использование функции [clamp()](https://developer.mozilla.org/en-US/docs/Web/CSS/clamp).
Разница только в конечной точке:
- для `fluid()` это `$minViewportWidth` (значение берется из константы `$container-min-width` в `constants.scss`).
- для `fluid-to-laptop()` это значение константы `$container-laptop-width`.

При использовании команды `npm run build`, на выходе получается минифицированный и отполированный с помощью постпроцессора **postcss** (плагинов [postcss-preset-env](https://www.npmjs.com/package/postcss-preset-env) и [postcss-pxtorem](https://www.npmjs.com/package/postcss-pxtorem)) css-файл.

## Работа с HTML

Для создания html-файла страницы используйте корневую папку разработки - **src**, а для создания часто используемых и одинаковых частей html-кода используйте папку **partials**.

Многие процессы работы с html-файлами автоматизированы при помощи плагинов для **vite**:

- Плагин [vite-plugin-handlebars](https://github.com/alexlafroscia/vite-plugin-handlebars), позволяет разделять html-код на части, вынося одинаковые элементы в отдельные файлы и подключая их в нужных местах.

```html
{{> название-файла }}
```

> **ВАЖНО:** В этих частях html-кода следует использовать пути относительно корня `src` (например при использовании `img` в атрибуте `src`, путь должен начинаться с `./images/` или `/images/` если настроен alias).

Также можно использовать циклы для итерации по массивам данных:

```html
{{#each название-массива}}
  {{> название-файла this}}
{{/each}}
```

- Плагин [vite-plugin-svg-icons](https://github.com/vbenjs/vite-plugin-svg-icons), позволяет легко и удобно работать с svg иконками из папки **icons** как с svg спрайтом.

```html
<svg>
  <use href="#icon-название-иконки"></use>
</svg>
```

> Если иконка не подгружается, попробуйте перезапустить сборку и перезагрузить страницу с очисткой кэша.

- Плагин [@atrocityz/vite-plugin-html-img-to-picture](https://github.com/atrocityz/vite-plugin-html-img-to-picture), позволяет автоматически в build версии проекта преобразовывать использование html-тега `img` в `picture` вместе с конвертацией изображения в современные форматы и его оптимизацией. Плагин обрабатывает только использование изображений из директории **/src/images/** и только изображения форматов **jpg**, **jpeg** или **png**.

```html
<!-- Изображение изначально загружено в 2x размере (например, 300x300) -->
<img src="./images/название-изображения.png" alt="" />
```

будет преобразовано в:

```html
<picture>
  <source
    type="image/avif"
    srcset="/assets/images/название-изображения.avif, /assets/images/название-изображения@2x.avif 2x"
    sizes="(min-width: 150px) 150px, 100vw"
  />
  <source
    type="image/webp"
    srcset="/assets/images/название-изображения.webp, /assets/images/название-изображения@2x.webp 2x"
    sizes="(min-width: 150px) 150px, 100vw"
  />
  <img
    src="/assets/images/название-изображения.png"
    srcset="/assets/images/название-изображения.png, /assets/images/название-изображения@2x.png 2x"
    sizes="(min-width: 150px) 150px, 100vw"
    decoding="async"
    loading="lazy"
    width="150"
    height="150"
    alt=""
  />
</picture>
```

> **ВАЖНО:** Изображение, которое будет конвертироваться плагином следует изначально загружать в 2x формате (если установлен параметр `isRetinaSupport: true` для плагина, по умолчанию так и есть), подробнее в документации плагина.

## Работа с данными

Для передачи данных в HTML-шаблоны (например, для генерации списка товаров) используется плагин `vite-plugin-handlebars`.

Чтобы добавить новый источник данных:

1.  Создайте JSON-файл с данными в папке `src/data/` (например, `data.json`).
2.  Импортируйте этот файл в `vite.config.js`.
3.  Добавьте данные в объект `context` в настройках плагина `handlebars`.

Пример `vite.config.js`:

```javascript
import dataObject from './src/data/data.json'; // 1. Импорт

export default defineConfig({
    plugins: [
        handlebars({
            // ...
            context: {
                variableName: dataObject, // 2. Добавление в контекст под нужным именем
            },
        }),
        // ...
    ],
});
```

После этого данные будут доступны в HTML-файлах по ключу (например, `{{#each variableName}}`).

## Работа с JavaScript

Вся работа с JavaScript ведется в папке **scripts** (или в корне `src` для `main.js`). А для подключения js модулей используйте файл **main.js** или **index.js** в соответствующих папках.

## Чистый код

Для поддержки чистоты кода по-максимуму используются линтеры:

- [Prettier](https://prettier.io/) - для форматирования всего кода (советую включить форматирование кода при сохранении файла);
- [Stylelint](https://stylelint.io/) - для проверки кода стилей на следование правилам, прописанным в конфигурационном файле, включая расположение свойств;
- [Eslint](https://eslint.org/) - для проверки JavaScript кода на следование правилам, прописанным в конфигурационном файле;

## Углубленная работа с Git и GitHub

Для GitHub используется GitHub Actions, который позволяет автоматически деплоить build версию проекта, после отправки изменений на GitHub.

Для Git - [Husky](https://typicode.github.io/husky/), [Lint-staged](https://github.com/lint-staged/lint-staged) и [Commitlint](https://commitlint.js.org/). Все эти инструменты в связке позволяют автоматически проверять название коммита и код перед его созданием.

## Полезные ресурсы

- [Конвертер шрифтов](https://transfonter.org/)
- [Конвертер картинок](https://tinypng.com/)
- [Favicon генератор по картинке](https://favicon.io/favicon-converter/)
- [Статья про именование коммитов](https://www.conventionalcommits.org/ru/v1.0.0/)
- [Эмодзи для коммитов](https://gitmoji.dev/)
- [Документация Vite](https://vitejs.dev/)
- [Репозиторий Vite](https://github.com/vitejs/vite)
- [Awesome Vite](https://github.com/vitejs/awesome-vite)
